### AMI / Volume SnapShot 이란 ?

* **AMI : Amazon Machine Image**
  * EC2 인스턴스에 연결되어 있는 OS가 설치되어 있는 루트 장치를 포함한 모든 EBS를 백업하는 것.
  * AMI에는 인스턴스가 어떤 EBS 스냅샷과 연결되어있는지에 대한 정보가 포함.
  * 인스턴스를 시작할 때 필요한 정보를 포함한다. (예를 들어, OS 정보, AMI 접근 권한, EBS 볼륨 매핑 정보 등)
  * 동일한 구성의 인스턴스가 여러 개 필요할 때는 한 AMI에서 여러 인스턴스를 시작할 수 있습니다.
* **Volume / Snapshot**
  * 볼륨은 현재 서버에서 사용하고 있는 디스크

* **Snapshot**
  * 특정 시점에 분리하여 저장한 Volume / 데이터 백업의 기준
  * EBS 스냅샷으로 EBS 볼륨뿐만 아니라 EC2 인스턴스를 생성할 수 있는 AMI 도 생성할 수 있다.

---

### AMI / Volume SnapShot 의 차이점 

* EBS 스냅샷은 단일 EBS 볼륨의 백업이다.
  * EBS 스냅샷에는 EBS 스냅샷이 생성될 때 EBS 볼륨에 저장된 모든 데이터가 포함된다.
  * Ec2 인스턴스에서 사용하고 있는 디스크와도 같다. 특정시점에 Snapshot 형태로 분리하여 저장할 수 있다.
  * 스냅샷 삭제하면 해당 스냅샷에 고유한 데이터만 제거된다.
* **AMI 이미지는 전체 EC2 인스턴스의 백업이다.**
  * EC2 Instance를 생성하는 Base 이미지 역할을 하는 것.
  * 적절한 구성을 통해 여러 EBS 볼륨을 포함하는 AMI를 생성할 수 있다.
* EBS 스냅샷은 증분으로 생각할 수 있으므로, 변경된 데이터의 스토리지에 대해서만 비용을 **지불하면** 된다. 따라서 변경되지 않는 EBS 볼륨의 여러 EBS 스냅샷을 생성해도 높은 비용이 발생하지 않는다.
* 가장 기본적인 차이점은 스냅샷은 EBS와 연결되고, AMI는 EC2 인스턴스와 연결된다.

---

### AMI 생성 시 유의 사항 

* **재부팅 안 함** - 선택할 경우 -> 생성된 이미지의 파일 시스템 무결성을 보장할 수 없다.★
* 무조건  /  Reboot 안하는 게 중요하다.
* EBS 스냅샷으로 AMI를 생성할 때는 Linux의 경우 Kernel ID를 알아야 한다.

---

### Linux Cloud 설정 확인 해보기 

- Linux Ec2 생성 후 root 계정 로그인 금지 
- test 계정 생성 후 비밀번호 로그인 사용 설정 ( pem key가 아닌 비밀번호로 로그인 되는지 확인 )
- 해당 인스턴스 AMI 생성 뒤 생성한 AMI 로 인스턴스 추가 생성 
- 생성된 인스턴스에 바로 test계정 비밀번호 로그인 가능한지 확인 
  - AMI

---

참고 사이트

https://galid1.tistory.com/361

https://tech.cloud.nongshim.co.kr/2018/10/16/%ec%b4%88%eb%b3%b4%ec%9e%90%eb%a5%bc-%ec%9c%84%ed%95%9c-aws-%ec%9b%b9%ea%b5%ac%ec%b6%955-2-nat-%ec%84%9c%eb%b2%84-%ec%83%9d%ec%84%b12/